// Life-Hedge Simulator Data
// 출처: HIRA 보건의료빅데이터개방시스템 (2024), 통계청 인구현황 (2024.12)

// 연령 그룹 매핑 (HIRA 데이터 기준)
const AGE_GROUPS = [
  '5세미만', '5_9세', '10_14세', '15_19세', '20_24세', '25_29세',
  '30_34세', '35_39세', '40_44세', '45_49세', '50_54세', '55_59세',
  '60_64세', '65_69세', '70_74세', '75_79세', '80세이상'
];

// 연령 그룹을 나이 범위로 변환
const AGE_RANGES = {
  '5세미만': [0, 4], '5_9세': [5, 9], '10_14세': [10, 14], '15_19세': [15, 19],
  '20_24세': [20, 24], '25_29세': [25, 29], '30_34세': [30, 34], '35_39세': [35, 39],
  '40_44세': [40, 44], '45_49세': [45, 49], '50_54세': [50, 54], '55_59세': [55, 59],
  '60_64세': [60, 64], '65_69세': [65, 69], '70_74세': [70, 74], '75_79세': [75, 79],
  '80세이상': [80, 100]
};

// 통계청 2024년 12월 전국 인구 (성별/연령별)
const POPULATION = {
  남: {
    '5세미만': 650872, '5_9세': 958188, '10_14세': 1192516, '15_19세': 1181242,
    '20_24세': 1374627, '25_29세': 1725897, '30_34세': 1834878, '35_39세': 1623100,
    '40_44세': 1979705, '45_49세': 1946415, '50_54세': 2248330, '55_59세': 2142941,
    '60_64세': 2087725, '65_69세': 1762834, '70_74세': 1130609, '75_79세': 801193,
    '80세이상': 855727 // 80-84 + 85-89 + 90-94 + 95-99 합산
  },
  여: {
    '5세미만': 620904, '5_9세': 910154, '10_14세': 1131787, '15_19세': 1113720,
    '20_24세': 1273187, '25_29세': 1581945, '30_34세': 1644334, '35_39세': 1522251,
    '40_44세': 1903094, '45_49세': 1893609, '50_54세': 2184789, '55_59세': 2130310,
    '60_64세': 2103919, '65_69세': 1864305, '70_74세': 1269314, '75_79세': 985481,
    '80세이상': 1578742 // 80-84 + 85-89 + 90-94 + 95-99 합산
  }
};

// HIRA 질병 데이터 (2024년 환자수, 1인당 평균 의료비)
const DISEASES = {
  위암: {
    name: '위암',
    nameEn: 'Stomach Cancer',
    category: 'cancer',
    color: '#FF6B6B',
    남: {
      '5세미만': 0, '5_9세': 0, '10_14세': 0, '15_19세': 5, '20_24세': 20, '25_29세': 80,
      '30_34세': 224, '35_39세': 483, '40_44세': 1865, '45_49세': 3479, '50_54세': 7266,
      '55_59세': 12215, '60_64세': 20691, '65_69세': 24022, '70_74세': 20068, '75_79세': 16502,
      '80세이상': 14190
    },
    여: {
      '5세미만': 0, '5_9세': 0, '10_14세': 1, '15_19세': 3, '20_24세': 18, '25_29세': 123,
      '30_34세': 290, '35_39세': 659, '40_44세': 2143, '45_49세': 3222, '50_54세': 4726,
      '55_59세': 6230, '60_64세': 8700, '65_69세': 9347, '70_74세': 8156, '75_79세': 7408,
      '80세이상': 8915
    },
    avgCost: 3743000 // 요양급여비용총액 / 환자수 (천원 단위 → 원)
  },
  대장암: {
    name: '대장암',
    nameEn: 'Colorectal Cancer',
    category: 'cancer',
    color: '#4ECDC4',
    남: {
      '5세미만': 1, '5_9세': 1, '10_14세': 5, '15_19세': 24, '20_24세': 130, '25_29세': 478,
      '30_34세': 1282, '35_39세': 2054, '40_44세': 4111, '45_49세': 4898, '50_54세': 9595,
      '55_59세': 13309, '60_64세': 19017, '65_69세': 20590, '70_74세': 15970, '75_79세': 13117,
      '80세이상': 12968
    },
    여: {
      '5세미만': 1, '5_9세': 1, '10_14세': 3, '15_19세': 21, '20_24세': 76, '25_29세': 351,
      '30_34세': 877, '35_39세': 1544, '40_44세': 3371, '45_49세': 4257, '50_54세': 7655,
      '55_59세': 9038, '60_64세': 10830, '65_69세': 11195, '70_74세': 9527, '75_79세': 9030,
      '80세이상': 13323
    },
    avgCost: 5052000
  },
  폐암: {
    name: '폐암',
    nameEn: 'Lung Cancer',
    category: 'cancer',
    color: '#45B7D1',
    남: {
      '5세미만': 2, '5_9세': 1, '10_14세': 2, '15_19세': 10, '20_24세': 32, '25_29세': 70,
      '30_34세': 158, '35_39세': 294, '40_44세': 714, '45_49세': 1294, '50_54세': 2894,
      '55_59세': 5600, '60_64세': 11195, '65_69세': 16668, '70_74세': 17646, '75_79세': 15380,
      '80세이상': 14669
    },
    여: {
      '5세미만': 1, '5_9세': 7, '10_14세': 2, '15_19세': 8, '20_24세': 25, '25_29세': 76,
      '30_34세': 202, '35_39세': 407, '40_44세': 964, '45_49세': 1705, '50_54세': 3530,
      '55_59세': 5757, '60_64세': 9380, '65_69세': 11165, '70_74세': 9277, '75_79세': 8020,
      '80세이상': 8567
    },
    avgCost: 9120000
  },
  간암: {
    name: '간암',
    nameEn: 'Liver Cancer',
    category: 'cancer',
    color: '#96CEB4',
    남: {
      '5세미만': 42, '5_9세': 45, '10_14세': 29, '15_19세': 31, '20_24세': 33, '25_29세': 45,
      '30_34세': 110, '35_39세': 293, '40_44세': 1065, '45_49세': 2051, '50_54세': 4578,
      '55_59세': 7636, '60_64세': 11366, '65_69세': 13025, '70_74세': 10443, '75_79세': 8232,
      '80세이상': 7131
    },
    여: {
      '5세미만': 15, '5_9세': 32, '10_14세': 36, '15_19세': 19, '20_24세': 26, '25_29세': 35,
      '30_34세': 72, '35_39세': 155, '40_44세': 441, '45_49세': 595, '50_54세': 1124,
      '55_59세': 1865, '60_64세': 2823, '65_69세': 3677, '70_74세': 3605, '75_79세': 3357,
      '80세이상': 4207
    },
    avgCost: 8743000
  },
  유방암: {
    name: '유방암',
    nameEn: 'Breast Cancer',
    category: 'cancer',
    color: '#FF69B4',
    남: {
      '5세미만': 0, '5_9세': 0, '10_14세': 2, '15_19세': 5, '20_24세': 2, '25_29세': 6,
      '30_34세': 4, '35_39세': 10, '40_44세': 29, '45_49세': 50, '50_54세': 85,
      '55_59세': 127, '60_64세': 179, '65_69세': 183, '70_74세': 181, '75_79세': 141,
      '80세이상': 160
    },
    여: {
      '5세미만': 0, '5_9세': 0, '10_14세': 1, '15_19세': 24, '20_24세': 164, '25_29세': 1041,
      '30_34세': 3598, '35_39세': 9219, '40_44세': 27174, '45_49세': 46742, '50_54세': 62763,
      '55_59세': 54886, '60_64세': 51864, '65_69세': 39184, '70_74세': 22236, '75_79세': 13289,
      '80세이상': 8819
    },
    avgCost: 5397000
  },
  갑상선암: {
    name: '갑상선암',
    nameEn: 'Thyroid Cancer',
    category: 'cancer',
    color: '#DDA0DD',
    남: {
      '5세미만': 0, '5_9세': 0, '10_14세': 30, '15_19세': 124, '20_24세': 653, '25_29세': 2267,
      '30_34세': 5327, '35_39세': 7565, '40_44세': 11529, '45_49세': 11659, '50_54세': 12596,
      '55_59세': 11454, '60_64세': 11351, '65_69세': 8960, '70_74세': 5019, '75_79세': 2915,
      '80세이상': 1943
    },
    여: {
      '5세미만': 1, '5_9세': 7, '10_14세': 74, '15_19세': 443, '20_24세': 2353, '25_29세': 8059,
      '30_34세': 15873, '35_39세': 21260, '40_44세': 34622, '45_49세': 38950, '50_54세': 47204,
      '55_59세': 47576, '60_64세': 49812, '65_69세': 39090, '70_74세': 22075, '75_79세': 13124,
      '80세이상': 8300
    },
    avgCost: 838000
  },
  뇌혈관질환: {
    name: '뇌혈관질환',
    nameEn: 'Cerebrovascular Disease',
    category: 'brain',
    color: '#9B59B6',
    남: {
      '5세미만': 294, '5_9세': 338, '10_14세': 566, '15_19세': 753, '20_24세': 1192, '25_29세': 2118,
      '30_34세': 4118, '35_39세': 7227, '40_44세': 15383, '45_49세': 24061, '50_54세': 43295,
      '55_59세': 65713, '60_64세': 98791, '65_69세': 113984, '70_74세': 100543, '75_79세': 90496,
      '80세이상': 106196
    },
    여: {
      '5세미만': 249, '5_9세': 327, '10_14세': 587, '15_19세': 762, '20_24세': 1275, '25_29세': 2597,
      '30_34세': 4156, '35_39세': 6274, '40_44세': 12482, '45_49세': 19187, '50_54세': 36202,
      '55_59세': 54688, '60_64세': 83701, '65_69세': 100152, '70_74세': 94939, '75_79세': 91941,
      '80세이상': 152966
    },
    avgCost: 2815000
  },
  허혈성심질환: {
    name: '허혈성심질환',
    nameEn: 'Ischemic Heart Disease',
    category: 'heart',
    color: '#E74C3C',
    남: {
      '5세미만': 68, '5_9세': 82, '10_14세': 112, '15_19세': 293, '20_24세': 747, '25_29세': 1500,
      '30_34세': 2839, '35_39세': 5616, '40_44세': 14793, '45_49세': 27261, '50_54세': 55159,
      '55_59세': 86291, '60_64세': 128893, '65_69세': 145801, '70_74세': 119233, '75_79세': 95814,
      '80세이상': 90867
    },
    여: {
      '5세미만': 44, '5_9세': 33, '10_14세': 49, '15_19세': 184, '20_24세': 494, '25_29세': 845,
      '30_34세': 1145, '35_39세': 1662, '40_44세': 3478, '45_49세': 6484, '50_54세': 13676,
      '55_59세': 24304, '60_64세': 45339, '65_69세': 62605, '70_74세': 66019, '75_79세': 64832,
      '80세이상': 98481
    },
    avgCost: 1270000
  },
  치매: {
    name: '치매',
    nameEn: 'Dementia',
    category: 'brain',
    color: '#8E44AD',
    남: {
      '5세미만': 1, '5_9세': 0, '10_14세': 0, '15_19세': 2, '20_24세': 9, '25_29세': 17,
      '30_34세': 36, '35_39세': 53, '40_44세': 126, '45_49세': 242, '50_54세': 669,
      '55_59세': 1802, '60_64세': 5568, '65_69세': 13074, '70_74세': 24207, '75_79세': 42617,
      '80세이상': 130812
    },
    여: {
      '5세미만': 0, '5_9세': 0, '10_14세': 0, '15_19세': 2, '20_24세': 10, '25_29세': 14,
      '30_34세': 20, '35_39세': 40, '40_44세': 100, '45_49세': 190, '50_54세': 734,
      '55_59세': 2138, '60_64세': 6438, '65_69세': 16586, '70_74세': 35493, '75_79세': 75717,
      '80세이상': 381819
    },
    avgCost: 3066000
  }
};

// 각 질병별 3대 질병 카테고리 구분
const DISEASE_CATEGORIES = {
  cancer: ['위암', '대장암', '폐암', '간암', '유방암', '갑상선암'],
  brain: ['뇌혈관질환', '치매'],
  heart: ['허혈성심질환']
};

// 헬퍼 함수: 나이를 연령 그룹으로 변환
function ageToGroup(age) {
  if (age < 5) return '5세미만';
  if (age < 10) return '5_9세';
  if (age < 15) return '10_14세';
  if (age < 20) return '15_19세';
  if (age < 25) return '20_24세';
  if (age < 30) return '25_29세';
  if (age < 35) return '30_34세';
  if (age < 40) return '35_39세';
  if (age < 45) return '40_44세';
  if (age < 50) return '45_49세';
  if (age < 55) return '50_54세';
  if (age < 60) return '55_59세';
  if (age < 65) return '60_64세';
  if (age < 70) return '65_69세';
  if (age < 75) return '70_74세';
  if (age < 80) return '75_79세';
  return '80세이상';
}

// 발병 확률 계산 (환자수 / 인구수)
function getRiskProbability(disease, gender, ageGroup) {
  const patients = DISEASES[disease]?.[gender]?.[ageGroup] || 0;
  const population = POPULATION[gender]?.[ageGroup] || 1;
  return patients / population;
}

// 1인당 평균 의료비
function getAverageCost(disease) {
  return DISEASES[disease]?.avgCost || 0;
}
